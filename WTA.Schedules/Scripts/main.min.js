// data property key:
// trips: t=trip_id, r=route_id, s=service_id, h=headsign, d=direction_id, b=block_id
// stop_times: t=trip_id, s=stop_id, b=departure_time, c=stop_sequence
// routes: r=route_id, s=route_short_name, l=route_long_name, c=route_color
// calendar: s=service_id, d=start_date, e=end_date
// calendar_dates: s=service_id, d=date, e=exception_type  ***DATE NEEDS TO BE DONE CAREFULLY***
// stops: s=stop_id, c=stop_code, n=stop_name, l=stop_lat, o=stop_lon
// locals
//Function to convert any element(s) to another element(s) and retain its attributes. Call it like: $("h3").changeElementType("h1");
// ----------- History -------------------
//When clicking on the day tabs, date should remain in the same week
//When clicking on the date picker, just use the date they selected
function lookupRouteID(e){e=e.toUpperCase(),routeList||(routeList=getRoutes())
var t=$.grep(routeList,function(t){return t.s==e})
return t?t[0].r:null}function getQueryParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")
var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),a=t.exec(location.hash)
return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}function loadQueryParams(){var e=getQueryParameterByName("routeId")
e&&e==parseInt(e)?validateRouteId(e):currentRouteID=null
var t=getQueryParameterByName("routeNum")
if(t){var a=lookupRouteID(t)
a&&validateRouteId(a)}else t=null
var r=getQueryParameterByName("stopId")
r&&r==parseInt(r)?validateStopId(r):currentStopID=null
var n=getQueryParameterByName("directionId")
n?validateDirId(n):currentDirectionID=0
var o=getQueryParameterByName("search")
stopQuery=o?o:null}function loadMain(){hideLoading(),loadQueryParams(),$("#headerMain").load("/common/"+language+"/header.html",function(){initializeHeader()}),$("#sidebar").load("/common/"+language+"/sidebar.html",function(){initializeSidebar()}),$("#footer").load("/common/"+language+"/footer.html"),$("#leftNav").load("/common/"+language+"/left-nav.html"),window.setTimeout(function(){},500),loadPageContent()}function loadTripData(e){if("undefined"!=typeof trips)e&&e()
else{var t=document.createElement("script")
t.type="text/javascript",t.onload=function(){e()},t.src=gzipEnabled?"http://data.ridewta.com/gtfs/data_trips.js.gz":"http://data.ridewta.com/gtfs/data_trips.js",(document.head||document.getElementsByTagName("head")[0]).appendChild(t)}}function loadPageContent(){try{google.maps.event.clearListeners(window,"resize"),$("#map-canvas").remove()}catch(e){}loadQueryParams()
var t=window.location.hash.split("?")[0].replace("#","")
switch(t){case"route-details":loadTripData(function(){loadRouteDetails(currentRouteID)})
break
case"map":loadTripData(function(){loadMap()})
break
case"stops":loadTripData(function(){loadStops(currentStopID)})
break
case"routes":default:t="routes",loadRoutes()}setHistory(t)}function setLeftnav(e){$("#leftNav ul li").removeClass("selected"),$(e).addClass("selected")}function searchSite(){var e=$("#searchInput").val().trim()
e&&(window.location=searchURL+encodeURIComponent(e))}function setHistory(){}function onPopState(){}function initializeHeader(){BindTopNav(),$("#searchInput").keypress(function(e){13==e.keyCode&&searchSite()})}function initializeSidebar(){$("#fdate").datepicker({dateFormat:"mm/dd/y"}).datepicker("setDate",new Date)
var e=new Date
e=e.getHours()+":"+e.getMinutes(),$("#ftime").val(e),routeList||(routeList=getRoutes())
var t=$("#selRoutes")
for(i=0;i<routeList.length;i++)t.append("<option value='"+routeList[i].s+"'>"+routeList[i].s+"</option>")
$("#findRoute").click(findRouteClick),$("#findStop").click(onFindStopClick),$("#tbStop").keypress(function(e){13==e.which&&$("#findStop").trigger("click")})
var a=$("#noticeList")
for(i=0;i<notices.length;i++)a.append("<li><a href='"+notices[i].url+"'>"+notices[i].title+"</a></li>")}function showLoading(e){var t=$(e).children(":visible")
t.hide(),$(e).addClass("spinner"),t.addClass("spinnerMark")}function hideLoading(){$(".spinner-cont").hide(),$(".spinner").removeClass("spinner"),$(".spinnerMark").show(),$(".spinnerMark").removeClass("spinnerMark")}function scrollContentTop(){0==isElementInViewport($("#appPage"))&&$("html,body").animate({scrollTop:$("#appPage").offset().top},"fast")}function isElementInViewport(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0])
var t=e.getBoundingClientRect()
return t.top>=0}function loadRoutes(){$("#appPage").load("/common/"+language+"/routes.html",function(){initializeRoutes()}),setLeftnav("#lnavRoutes")}function initializeRoutes(){routeList||(routeList=getRoutes())
var e=$("#routeList")
for(i=0;i<routeList.length;i++){var t=routeList[i].l
t=t.replace("&harr;",'<i class="fa fa-arrows-h"></i>'),e.append("<li><span class='route-num'><a href='#route-details?routeNum="+routeList[i].s+"' class='route-num'>"+routeList[i].s+"</a></span><a href='#route-details?routeNum="+routeList[i].s+"'>"+t+"</a></li>")}}function loadRouteDetails(e){currentRouteID=e,$("#appPage").load("/common/"+language+"/route-details.html",function(){initializeRouteDetails()}),setLeftnav("#lnavRouteDetails")}function initializeRouteDetails(){if(currentRouteID){$(".routeNumber").empty()
var e=getRoute(currentRouteID)
if(e){var t=e.l.split("&harr;")
routeDir0=t[0],routeDir1=t[1]
var a=2
a=void 0===routeDir1?1:2
var r=""
for(i=0;i<a;i++)r+='<option value="'+[i]+'" id="dir'+[i]+'">to '+t[i]+"</option>"
$("#selRouteDir").append(r),$("#routeNumber").html(lang("Route")+" "+e.s+" - <br />"+lang("to")+" "+t[currentDirectionID]),"blue"==e.c||"gold"==e.c||"green"==e.c||"red"==e.c?($(".go-line").attr("src","../Images/go-"+e.c+".jpg"),$(".go-line").show()):$(".go-line").hide()
var n=document.createElement("img")
n.onload=function(){$("#routeMap img").remove(),$("#routeMap").prepend(n),$("#routeMap img").attr("onClick","showMapDialog();")},n.onerror=function(){$("#routeMap").hide()},n.src="http://data.ridewta.com/routemaps/"+e.s+".png",$("#mapDialog img").attr("src","http://data.ridewta.com/routemaps/"+e.s+".png")}$("#selRouteDir").on("change",function(){currentDirectionID==$(this).children(":selected").attr("value")||(currentDirectionID=$(this).children(":selected").attr("value"),$("#routeNumber").html(lang("Route")+" "+e.s+" - <br />"+lang("to")+" "+t[currentDirectionID]),displaySelectedRouteAsync())}),$("#dayTabs").tabs({activate:onRouteTabChanged})
var o=(new Date).getDay(),s=new Date,l=s.getDate().toString()
l.length<2&&(l="0"+l)
var c=(s.getMonth()+1).toString()
c.length<2&&(c="0"+c)
var u=s.getFullYear().toString()
specialServiceDate=u+c+l
var d=parseInt(specialServiceDate)
serviceChangeDate=parseInt(calendar[0].e),serviceLastDate=parseInt(calendar[4].e),o>0&&6>o?serviceChangeDate>=d?($("#Weekday").addClass("selectedDay"),currentServiceID=1):d>serviceLastDate?($("#Weekday").addClass("selectedDay"),currentServiceID=999):($("#Weekday").addClass("selectedDay"),currentServiceID=11):6==o?serviceChangeDate>=d?($("#Saturday").addClass("selectedDay"),currentServiceID=2):d>serviceLastDate?($("#Saturday").addClass("selectedDay"),currentServiceID=999):($("#Saturday").addClass("selectedDay"),currentServiceID=12):0==o&&(serviceChangeDate>=d?($("#Sunday").addClass("selectedDay"),currentServiceID=3):d>serviceLastDate?($("#Sunday").addClass("selectedDay"),currentServiceID=999):($("#Sunday").addClass("selectedDay"),currentServiceID=13))
var p={weekday:"long",year:"numeric",month:"long",day:"numeric"},h=(new Date).toLocaleDateString("en-US",p)
$("#datepicker").attr("value",h)
var g=new Date
$(function(){$("#datepicker").datepicker({dateFormat:"DD, MM d, yy",minDate:g,showOn:"both",buttonText:"<i class='fa fa-calendar'></i>"})})
var f=""
for(i=0;i<routes.length;i++)f+='<option value="'+routes[i].s+'" id="'+routes[i].r+'">'+routes[i].s+"</option>"
$("#routeList").append(f),currentRouteID&&$('#routeList option[id="'+currentRouteID+'"]').attr("selected","selected"),$("#routeList").on("change",function(){currentRouteNumber=this.value,currentRouteID=$(this).children(":selected").attr("id"),window.location.href="#route-details?routeNum="+currentRouteNumber}),$("#routeList").on("click",function(){$(this).removeClass("highlight")}),$(".page-button.left").mousedown(function(){pagerTimeout=setInterval(function(){pageLeft()},100)}),$(".page-button.right").mousedown(function(){pagerTimeout=setInterval(function(){pageRight()},100)}),$(document).mouseup(function(){return clearInterval(pagerTimeout),!1}),$("#datepicker").on("change",onRouteDatepickerChanged),$("#stopListStart").on("change",function(){$("#stopListEnd option:disabled").not(".first").removeAttr("disabled")
{var e=$("#stopListStart option:selected").index()
this.value,$(this).children(":selected").attr("id"),$("#busTable tr:eq(0) td span.top")}for(i=0;i<e;i++)$("#stopListEnd option:nth-child("+i+")").prop("disabled",!0)}),displaySelectedRouteAsync(),scrollContentTop()}else loadRoutes()}function onRouteDatepickerChanged(e){currentDate=e.target.value,currentDayNum=Date.parse(currentDate),currentDayNum=new Date(currentDayNum),currentDayNum=parseInt(currentDayNum.getFullYear().toString()+("0"+(currentDayNum.getMonth()+1).toString()).slice(-2)+("0"+currentDayNum.getDate().toString()).slice(-2)),currentDate=currentDate.split(",")[0],thisDay(currentDate)}function onRouteTabChanged(e,t){var a=t.newTab[0].textContent
thisDay(a)}function setStickyHeader(){$tableHeader=$("#stopNames"),$tableHeaderClone=$("#stopNames").clone(),$tableHeaderClone.attr("id","stopNamesFixed")
for(var e=$("TD div",$tableHeader),t=$("TD div",$tableHeaderClone),a=0;a<e.length;a++){var r=$(e[a]).width()
$(t[a]).width(r)}tableHeaderTop=$tableHeader.offset().top,$tableContainer=$("#schedule"),$table=$("table",$tableContainer),$(window).resize(function(){$tableHeader&&$tableHeaderClone.width($tableContainer.width())}),$tableHeaderClone.css("width",$("#dayTabs").width()).css("overflow","hidden"),$("#top-scrollbar .fake-content").css("width",$("#busTable").width()+"px"),$("#top-scrollbar").scroll(function(){$("#schedule").scrollLeft($("#top-scrollbar").scrollLeft())}),$("#schedule").scroll(function(){$("#top-scrollbar").scrollLeft($("#schedule").scrollLeft())}),$(window).scroll(function(){if($tableHeader)if($(window).scrollTop()>$tableHeader.offset().top&&$(window).scrollTop()<$table.offset().top+$table.height()){if(0==$tableHeader.hasClass("hiddenHeader")){$tableHeader.addClass("hiddenHeader"),$("#busTable").prepend($tableHeaderClone),$tableHeaderClone.addClass("fixedHeader")
var e=$tableContainer.scrollLeft()
$tableHeaderClone.scrollLeft(e)}}else $tableHeader.removeClass("hiddenHeader"),$tableHeaderClone.remove(),$tableHeaderClone.removeClass("fixedHeader")}),$tableContainer.on("scroll",sync)}function showMapDialog(){$(window).width()>=520&&jQuery("#mapDialog").dialog({modal:!0,responsive:!0,width:"auto",height:"auto",dialogClass:"map-dialog",close:function(){$("#mapDialog").dialog("destroy")}})}function swapMapSize(){var e=$("#routeMap")
if(e.hasClass("normal"))e.animate({width:"100%"},"slow"),e.removeClass("normal"),$("i",e).removeClass("fa-search-plus"),$("i",e).addClass("fa-search-minus"),e.addClass("full")
else{{e.offset()}e.removeClass("full"),e.addClass("normal"),$("i",e).removeClass("fa-search-minus"),$("i",e).addClass("fa-search-plus"),e.animate({width:"25%"},"slow")}}function findRouteClick(){var e=$("#selRoutes").val()
"selectRoute"!=e&&(window.location.href="#route-details?routeNum="+e)}function flipRoute(){$tableHeader.removeClass("hiddenHeader"),$tableHeaderClone.remove(),$tableHeaderClone.removeClass("fixedHeader"),$tableHeaderClone=null,currentDirectionID=0==currentDirectionID?1:0,displaySelectedRouteAsync()
var e=$("#routeDir1").html(),t=$("#routeDir2").html()
$("#routeDir1").html(t),$("#routeDir2").html(e)}function thisDay(e){$("#dayTabs").tabs({activate:null}),"Weekday"==e||"Monday"==e||"Tuesday"==e||"Wednesday"==e||"Thursday"==e||"Friday"==e?(currentServiceID=serviceChangeDate>=currentDayNum?1:currentDayNum>serviceLastDate?999:11,$("#routeMap").hide(),$("#busTable").show(),$("#controls").show(),$("#top-scrollbar").show(),$("#dayTabs").tabs("option","active",0)):"Saturday"==e?(currentServiceID=serviceChangeDate>=currentDayNum?2:currentDayNum>serviceLastDate?999:12,$("#routeMap").hide(),$("#busTable").show(),$("#controls").show(),$("#top-scrollbar").show(),$("#dayTabs").tabs("option","active",1)):"Sunday"==e?(currentServiceID=serviceChangeDate>=currentDayNum?3:currentDayNum>serviceLastDate?999:13,$("#routeMap").hide(),$("#busTable").show(),$("#controls").show(),$("#top-scrollbar").show(),$("#dayTabs").tabs("option","active",2)):"Route Map"==e&&($("#busTable").hide(),$("#controls").hide(),$("#top-scrollbar").hide(),$("#routeMap").show(),$("#dayTabs").tabs("option","active",3)),$("#dayTabs").tabs({activate:onRouteTabChanged}),throwTheDate(),displaySelectedRouteAsync()}function displaySelectedRouteAsync(){var e=$("#schedule")
$("#top-scrollbar").hide(),$("#schedule").css("overflow-x","hidden"),showLoading(e),"undefined"!=typeof trips?setTimeout(function(){displaySelectedRoute(),$("#schedule").css("overflow-x","scroll"),$("#top-scrollbar").show()},1e3):loadTripData(function(){displaySelectedRoute(),$("#schedule").css("overflow-x","scroll"),$("#top-scrollbar").show()})}function displaySelectedRoute(){$("#noService").empty(),$("#stopListEnd").empty()
try{$("#busTable").empty()
var e=[],t=$.grep(calendar_dates,function(e){return e.d==specialServiceDate}),a=$.grep(t,function(e){return 2==e.e})
if(a.length>0);else if(t.length>0){var r=t[0].s
if(specialServiceDate==t[0].d)for(i=0;i<trips.length;i++)trips[i].r!=currentRouteID||trips[i].d!=currentDirectionID||trips[i].s!=currentServiceID&&trips[i].s!=r||e.push(trips[i])}else for(i=0;i<trips.length;i++)trips[i].r==currentRouteID&&trips[i].d==currentDirectionID&&trips[i].s==currentServiceID&&e.push(trips[i])
trip_headsign=0==e?-1:e[0].h
var n=[]
for(i=0;i<e.length;i++)for(tripStopArray=$.grep(stop_times,function(t){return t.t==e[i].t}),p=0;p<tripStopArray.length;p++)n.push(tripStopArray[p])
var o={},s=n.filter(function(e){return o[e.c]?!1:(o[e.c]=!0,!0)})
s.sort(function(e,t){return e.c<t.c?-1:e.c>t.c?1:0})
var l=[]
for(i=0;i<s.length;i++){var c=$.grep(stops,function(e){return e.s==s[i].s})
for(p=0;p<c.length;p++)l.push(c[p])}for($("#busTable").append('<tr id="stopNames"></tr>'),i=0;i<l.length;i++)$("#stopNames").append('<td id="'+l[i].s+'"><a href="#stops?stopId='+l[i].c+'"><div><span data-stopid='+l[i].s+' class="top">'+l[i].n+'</span><br/><span class="bottom">('+l[i].c+")</span></div></a></td>")
for(i=0;i<e.length;i++){$("#busTable").append('<tr class="tripTimes" id="trip'+e[i].t+'"></tr>')
var u=document.getElementById("trip"+e[i].t),d=$.grep(n,function(t){return t.t==e[i].t})
d.sort(function(e,t){return new Date("1970/01/01 "+e.b)-new Date("1970/01/01 "+t.b)})
var p=0
for(k=0;k<l.length;k++){var h=parseInt($("#stopNames td:eq("+k+")").attr("id"))
void 0==d[p]?$(u).append('<td id="'+l[k].s+'">--</td>'):d[p].s==parseInt($("#stopNames td:nth-child("+k+")").attr("id"))?(p++,k--):h!=d[p].s?$(u).append('<td id="'+l[k].s+'">--</td>'):($(u).append(7==d[p].b.length?'<td id="'+d[p].s+'">0'+d[p].b.slice(0,-3)+"</td>":'<td id="'+d[p].s+'">'+d[p].b.slice(0,-3)+"</td>"),p++)}}for(i=0;i<l.length;i++){var g=$("#busTable td:nth-child("+(i+1)+")").map(function(){return $(this).text()}).get(),f=0
for(p=1;p<g.length;p++)"--"==g[p]&&f++
f==g.length-1&&$("#busTable tr").find("td:eq("+i+")").addClass("markedForDeletion")}$(".markedForDeletion").remove()
var v=$("#busTable tr")
for(i=1;i<v.length;i++){var m=$(v[i]).children().length,S=[]
for(p=0;m>p;p++)S.push($("#busTable tr:eq("+i+") td:eq("+p+")").text())
S=S.filter(function(e){return"--"!=e}),S.sort(),$("#busTable tr:eq("+i+")").attr("value",S[0])}var b=$("#busTable"),D=$(".tripTimes")
D.sort(function(e,t){var a=$(e).attr("value"),r=$(t).attr("value")
return a>r?1:r>a?-1:0}),$.each(D,function(e,t){b.children("tbody").append(t)}),customizeStopListStart()
var y=function(){$(".tripTimes").each(function(){var t=$(this),a=$.grep(e,function(e){return t.attr("id")=="trip"+e.t})[0],o=$.grep(trips,function(e){return a.b==e.b&&(e.s==currentServiceID||e.s==r)}),s=[]
for(i=0;i<o.length;i++){var l=$.grep(stop_times,function(e){return o[i].t==e.t})
l.sort(function(e,t){return e.c<t.c?-1:1}),s.push(l[0])}s.sort(function(e,t){var a=new Date("1970/01/01 "+e.b),r=new Date("1970/01/01 "+t.b)
return r>a?-1:1}),n.sort(function(e,t){var a=new Date("1970/01/01 "+e.b),r=new Date("1970/01/01 "+t.b)
return r>a?-1:1})
var c,u=$.grep(n,function(e){return a.t==e.t})[0].b
for(i=0;i<s.length;i++)if(s[i].hasOwnProperty("b")&&s[i].b==u)if(void 0==s[i+1])c="Out of Service"
else var d=s[i+1].t
if("Out of Service"==c)$(this).append('<td class="outOfService">'+lang("Out of Service")+"</td>")
else{c=$.grep(trips,function(e){return d===e.t})
var p=c[0].d,h=(c[0].r,c[0].h),g=("'"+c[0].h+"'",$.grep(routes,function(e){return c[0].r===e.r}))
void 0==g[0]?$(this).append('<td class="outOfService">'+lang("Out of Service")+"</td>"):(g=g[0].s,c=g+" "+h,$(this).append('<td class="continuing"><a href="#route-details?routeNum='+g+"&?directionId="+p+'">'+c+"</a></td>"))}}),setStickyHeader()},w=$("#busTable tr.tripTimes td")
convertToStandard(w),setTimeout(y,100),selectedRoute=$('#routeList option[id="'+currentRouteID+'"]').attr("value"),-1===trip_headsign?$("#noService").append(a.length>0?lang("There is no service during the holiday."):999==currentServiceID?lang("Please check back later for future schedule information."):lang("There is no service during the specified route and time.")):$("#stopNames").append('<td><div class="continuesOnAs">'+lang("Continues On As")+"</div></td>")}catch(T){console.log(T)}finally{hideLoading()}var L=$("#stopListStart option:selected").index(),I=(this.value,$(this).children(":selected").attr("id"),$("#busTable tr:eq(0) td span.top")),C=""
for(i=L;i<I.length;i++)C+='<option value="'+$(I[i]).text()+'" id="'+$(I[i]).attr("data-stopid")+'">'+$(I[i]).text()+"</option>"
$("#stopListEnd").append(C)}function uniqueStops(e){var t=[],a=$.grep(calendar_dates,function(e){return e.d==specialServiceDate}),r=$.grep(a,function(e){return 2==e.e})
if(r.length>0);else if(a.length>0){var n=a[0].s
if(specialServiceDate==a[0].d)for(i=0;i<trips.length;i++)trips[i].r!=e||trips[i].d!=currentDirectionID||trips[i].s!=currentServiceID&&trips[i].s!=n||t.push(trips[i])}else for(i=0;i<trips.length;i++)trips[i].r==e&&trips[i].d==currentDirectionID&&trips[i].s==currentServiceID&&t.push(trips[i])
trip_headsign=0==t?-1:t[0].h
var o=[]
for(i=0;i<t.length;i++)for(tripStopArray=$.grep(stop_times,function(e){return e.t==t[i].t}),j=0;j<tripStopArray.length;j++)o.push(tripStopArray[j])
var s={},l=o.filter(function(e){return s[e.s]?!1:(s[e.s]=!0,!0)})
l.sort(function(e,t){return e.c<t.c?-1:e.c>t.c?1:0})
var c=[]
for(i=0;i<l.length;i++){var u=$.grep(stops,function(e){return e.s==l[i].s})
for(j=0;j<u.length;j++)c.push(u[j])}return c}function customizeStopListStart(){$("#stopListStart").empty(),$("#stopListStart").append('<option value="selectStopListStart" disabled>'+lang("Starting Bus Stop")+"</option>")
var e=$("#busTable tr:eq(0) td span.top")
if(e.length>0){var t=""
for(i=0;i<e.length;i++)t+='<option value="'+$(e[i]).text()+'" id="'+$(e[i]).attr("data-stopid")+'">'+$(e[i]).text()+"</option>"
$("#stopListStart").append(t).trigger("change")
for(var a=$("#busTable tr:eq(1) td:first")[0].innerHTML,r=$("#busTable tr:last td:last")[0].innerHTML,n=1,o=1;"--"==r||-1!=r.indexOf("<");)n++,r=$("#busTable tr:last td:nth-last-child("+n+")")[0].innerHTML
for(;"--"==a;)o++,a=$("#busTable tr:nth-child(2) td:nth-child("+o+")")[0].innerHTML
$("#startTime").attr("value",a),$("#endTime").attr("value",r)}}function applyFilter(){$("#noStops").remove(),$("#busTable tr:hidden").show(),$("#busTable td:hidden").show()
var e="#"+$("#stopListStart").children(":selected").attr("id"),t="#"+$("#stopListEnd").children(":selected").attr("id"),a=$("#busTable td").not(e+", "+t)
a.hide(),$("#printSchedule").show(),setStickyHeader()}function convertToMilitary(e){$.each(e,function(){if("am"==$(this)[0].innerHTML.substr(-2)&&7==$(this)[0].innerHTML.length){var e=$(this)[0].innerHTML.slice(0,4)
$(this)[0].innerHTML="0"+e}else if("am"==$(this)[0].innerHTML.substr(-2)&&8==$(this)[0].innerHTML.length&&"12"==$(this)[0].innerHTML.slice(0,2)){var t=$(this)[0].innerHTML.slice(3,5)
$(this)[0].innerHTML="00:"+t}else if("am"==$(this)[0].innerHTML.substr(-2)&&8==$(this)[0].innerHTML.length)$(this)[0].innerHTML=$(this)[0].innerHTML.slice(0,5)
else if("pm"==$(this)[0].innerHTML.substr(-2)&&7==$(this)[0].innerHTML.length){var t=$(this)[0].innerHTML.slice(2,4),a=parseInt($(this)[0].innerHTML.slice(0,1))+12
$(this)[0].innerHTML=a+":"+t}else if("pm"==$(this)[0].innerHTML.substr(-2)&&8==$(this)[0].innerHTML.length&&"12"==$(this)[0].innerHTML.slice(0,2))$(this)[0].innerHTML=$(this)[0].innerHTML.slice(0,5)
else if("pm"==$(this)[0].innerHTML.substr(-2)&&8==$(this)[0].innerHTML.length){var t=$(this)[0].innerHTML.slice(3,5),a=parseInt($(this)[0].innerHTML.slice(0,2))+12
$(this)[0].innerHTML=a+":"+t}})}function convertToStandard(e){$.each(e,function(){if("--"==$(this)[0].innerHTML);else if("00"==$(this)[0].innerHTML.slice(0,2)){var e=$(this)[0].innerHTML.slice(3,5)
$(this)[0].innerHTML="12:"+e+" am"}else if("0"==$(this)[0].innerHTML.slice(0,1))$(this)[0].innerHTML=$(this)[0].innerHTML.slice(1,5)+" am"
else if("10"==$(this)[0].innerHTML.slice(0,2)||"11"==$(this)[0].innerHTML.slice(0,2))$(this)[0].innerHTML=$(this)[0].innerHTML+" am"
else if("12"==$(this)[0].innerHTML.slice(0,2)){var e=$(this)[0].innerHTML.slice(3,5)
$(this)[0].innerHTML="12:"+e+" pm"}else{var t=parseInt($(this)[0].innerHTML.slice(0,2))-12,e=$(this)[0].innerHTML.slice(3,5)
$(this)[0].innerHTML=t+":"+e+" pm"}})}function clearFilter(){$("#busTable tr:hidden").show(),$("#busTable td:hidden").show(),$("#printSchedule").hide(),setStickyHeader()}function printDiv(){window.print()}function pdf(){var e=getRoute(currentRouteID).s,t="http://ridewta.com/Documents/Route%20"+e+".pdf"
window.open(t,"_blank")}function throwTheDate(){var e=$("#datepicker").datepicker("getDate"),t=e.getDay(),a=e.getDate(),r=e.getMonth(),n=e.getFullYear(),o=new Date(n,r+1,0).getDate(),i=a
if(1==currentServiceID||11==currentServiceID){if(!(t>0&&6>t)&&(i=a-(8-t),i>o)){i-=o
var r=r+1
r>11&&(r=0,n+=1)}}else if(2==currentServiceID||12==currentServiceID){if(6!=t&&(i=a+(6-t),i>o)){i-=o
var r=r+1
r>11&&(r=0,n+=1)}}else if((3==currentServiceID||13==currentServiceID)&&0!=t&&(i=a+(7-t),i>o)){i-=o
var r=r+1
r>11&&(r=0,n+=1)}var s=new Date(n,r,i)
$("#datepicker").attr("value",s),$(function(){$("#datepicker").datepicker("setDate",s),$("#datepicker").datepicker("option","dateFormat","DD, MM d, yy")})
var l=(r+1).toString()
l.length<2&&(l="0"+l)
var c=i.toString()
c.length<2&&(c="0"+c)
var u=n+""+l+c
specialServiceDate=u}function pageLeft(){var e=$("#schedule").scrollLeft()
$("#schedule").scrollLeft(e-100)}function pageRight(){var e=$("#schedule").scrollLeft()
$("#schedule").scrollLeft(e+100)}function loadStops(e){null==e&&(e=2001),currentStopID=e,$("#appPage").load("/common/"+language+"/stops.html",function(){initializeStops()}),setLeftnav("#lnavStops")}function initializeStops(){var e,t
if(null==currentStopID)e=new google.maps.LatLng(48.750267,-122.476362),t=105
else{var a=$.grep(stops,function(e){return e.c==currentStopID})
e=new google.maps.LatLng(a[0].l,a[0].o)}geocode=new google.maps.Geocoder
var r=new google.maps.LatLng(48.750267,-122.476362),n={center:r,zoom:16}
map=new google.maps.Map(document.getElementById("map-canvas"),n),panorama=map.getStreetView()
var o={position:r,pov:{heading:105,pitch:5},visible:!0}
panorama.setOptions(o)
var i=(new google.maps.StreetViewService,(new Date).getDay()),s=new Date,l=s.getDate().toString()
l.length<2&&(l="0"+l)
var c=(s.getMonth()+1).toString()
c.length<2&&(c="0"+c)
var u=s.getFullYear().toString()
specialServiceDate=u+c+l
var d=parseInt(specialServiceDate)
serviceChangeDate=parseInt(calendar[0].e),serviceLastDate=parseInt(calendar[4].e),i>0&&6>i?serviceChangeDate>=d?($("#Weekday").addClass("selectedDay"),currentServiceID=1):d>serviceLastDate?($("#Weekday").addClass("selectedDay"),currentServiceID=999):($("#Weekday").addClass("selectedDay"),currentServiceID=11):6==i?serviceChangeDate>=d?($("#Saturday").addClass("selectedDay"),currentServiceID=2):d>serviceLastDate?($("#Saturday").addClass("selectedDay"),currentServiceID=999):($("#Saturday").addClass("selectedDay"),currentServiceID=12):0==i&&(serviceChangeDate>=d?($("#Sunday").addClass("selectedDay"),currentServiceID=3):d>serviceLastDate?($("#Sunday").addClass("selectedDay"),currentServiceID=999):($("#Sunday").addClass("selectedDay"),currentServiceID=13)),$("#dayTabs").tabs({activate:onStopTabChanged}),$("#searchStops").keypress(function(e){13==e.which&&directSearch()}),$("#searchStops").on("focus",function(){$(this).removeClass("pulse")}),$("#scheduleFor").on("change",function(){chosenRoute=this.value,chosenRouteId=$(this).children(":selected").attr("id")})
var p={weekday:"long",year:"numeric",month:"long",day:"numeric"},h=(new Date).toLocaleDateString("en-US",p)
$("#datepicker").attr("value",h)
var g=new Date
$(function(){$("#datepicker").datepicker({showOn:"both",minDate:g,buttonText:"<i class='fa fa-calendar'></i>"})}),$("#datepicker").on("change",onStopDatepickerChanged),currentStopID?($("#stopNameHeader")[0].innerHTML=stopNameVariable,$("#searchStops").val(currentStopID),displaySelectedStop(),$("#mainSchedule").show()):($("#mainSchedule").hide(),$("#searchStops").addClass("pulse"),setTimeout(function(){$("#searchStops").removeClass("pulse")},6500))}function onStopDatepickerChanged(e){currentDate=e.target.value,currentDayNum=Date.parse(currentDate),currentDayNum=new Date(currentDayNum),currentDayNum=parseInt(currentDayNum.getFullYear().toString()+("0"+(currentDayNum.getMonth()+1).toString()).slice(-2)+("0"+currentDayNum.getDate().toString()).slice(-2)),currentDate=currentDate.split(",")[0],thisDayStops(currentDate)}function onStopTabChanged(e,t){var a=t.newTab[0].textContent
thisDayStops(a)}function SVpano(){var e=50,t=$.grep(stops,function(e){return e.c==currentStopID}),a=new google.maps.LatLng(t[0].l,t[0].o),r=new google.maps.StreetViewService
r.getPanoramaByLocation(a,e,function(e){e?(panoramaLatLng=e.location.latLng,initStreetView(a,panoramaLatLng)):($("#map-canvas").children().hide(),$("#noSV").remove(),$("#map-canvas").append('<p id="noSV" style="text-align:center;display:block;line-height:400px;">'+lang("No available view of this bus stop.")+"</p>"))})}function initStreetView(e,t){var a={position:e},r=new google.maps.StreetViewPanorama(document.getElementById("map-canvas"),a),n=google.maps.geometry.spherical.computeHeading(t,e)
map.setStreetView(r),r.setPov({heading:n,pitch:0}),r.setZoom(0)}function codeAddressStop(){var e=document.getElementById("address").value
geocoder.geocode({address:e},function(e,t){if(t==google.maps.GeocoderStatus.OK){map.setCenter(e[0].geometry.location)
{new google.maps.Marker({map:map,position:e[0].geometry.location})}}else alert(lang("Geocode was not successful for the following reason: ")+t)})}function directSearch(){var e=document.getElementById("searchStops").value
e.length>0&&(window.location.href=4==e.length&&e==parseInt(e)&&validateStopId(e)?"#stops?stopId="+e:"#map?search="+e)}function directMap(){var e=document.getElementById("selectedStopId").innerHTML
window.location.href=4==e.length?"#map?search="+e:"#map"}function thisDayStops(e){$("#dayTabs").tabs({activate:null}),$("#dayTabs div").removeClass("selectedDay"),"Weekday"==e||"Monday"==e||"Tuesday"==e||"Wednesday"==e||"Thursday"==e||"Friday"==e?(currentServiceID=serviceChangeDate>=currentDayNum?1:currentDayNum>serviceLastDate?999:11,$("#Weekday").addClass("selectedDay"),$("#printThis").show(),$("#map-canvas").hide(),$("#dayTabs").tabs("option","active",0)):"Saturday"==e?(currentServiceID=serviceChangeDate>=currentDayNum?2:currentDayNum>serviceLastDate?999:12,$("#Saturday").addClass("selectedDay"),$("#printThis").show(),$("#map-canvas").hide(),$("#dayTabs").tabs("option","active",1)):"Sunday"==e?(currentServiceID=serviceChangeDate>=currentDayNum?3:currentDayNum>serviceLastDate?999:13,$("#Sunday").addClass("selectedDay"),$("#printThis").show(),$("#map-canvas").hide(),$("#dayTabs").tabs("option","active",2)):"Street View"==e&&($("#StreetView").addClass("selectedDay"),$("#printThis").hide(),$("#map-canvas").show(),$("#dayTabs").tabs("option","active",3),panorama.setVisible(!0)),$("#dayTabs").tabs({activate:onStopTabChanged}),throwTheDate(),displaySelectedStop()}function displaySelectedStop(){var e=getStop(currentStopID)
if(e){stopIdVariable=e.s,stopNameVariable=e.n
var t=$.grep(stops,function(e){return e.c==currentStopID}),a=new google.maps.LatLng(t[0].l,t[0].o)
geocode.geocode({latLng:a},function(e,t){if(t==google.maps.GeocoderStatus.OK){var a,r
for(h=0;h<e.length;h++)for(i=0;i<e[0].address_components.length;i++)for(j=0;j<e[0].address_components[i].types.length;j++)"locality"==e[0].address_components[i].types[j]&&(a=e[0].address_components[i].long_name),"postal_code"==e[0].address_components[i].types[j]&&(r=e[0].address_components[i].long_name)
$("#cityZip").text(a+", "+r)}}),$("#stopTable").empty(),$("#stopTable").append("<tr><th>"+lang("Time")+"</th><th>"+lang("Route")+"</th></tr>"),$("#stopNameHeader")[0].innerHTML=e.n,$("#selectedStopId")[0].innerHTML=currentStopID,servingRoutes(),$("#servedByRoutes")[0].innerHTML=servedByRoutes
var r=""
for(i=0;i<finalStops.length;i++)r+='<option value="'+finalStops[i].s+'" id="'+finalStops[i].r+'">'+finalStops[i].s+"</option>"
$("#scheduleFor option:not(:first-child)").remove(),$("#scheduleFor").append(r),SVpano()}}function servingRoutes(){var e=$.grep(calendar_dates,function(e){return e.d==specialServiceDate})
if(e.length>0)var t=e[0].s
var a=$.grep(e,function(e){return 2==e.e})
if(a.length>0)return $("#stopTable").append('<tr><td colspan="2">'+lang("There is no service during the holiday.")+"</td></tr>"),void(selectedStopId=$("#selectedStopId")[0].innerHTML)
if(999==currentServiceID)return $("#stopTable").append('<tr><td colspan="2">'+lang("Please check back later for future schedule information.")+"</td></tr>"),void(selectedStopId=$("#selectedStopId")[0].innerHTML)
var r=[],n=$.grep(stop_times,function(e){return e.s==stopIdVariable&&1!=e.pickup_type})
for(finalStops=[],i=0;i<n.length;i++){var o=$.grep(trips,function(e){return e.t==n[i].t&&(e.s==currentServiceID||e.s==t)})
for(j=0;j<o.length;j++){var s=$.grep(routes,function(e){return e.r==o[j].r})
finalStops.push(s[0])}}var l={}
for(finalStops=finalStops.filter(function(e){return void 0!=e}),finalStops=finalStops.filter(function(e){return l[e.r]?!1:(l[e.r]=!0,!0)}),servedByRoutes="",finalStops.sort(function(e,t){e=Number(String(e.s).replace(/\D/g,"")),t=Number(String(t.s).replace(/\D/g,""))
var a=typeof e,r=typeof t
return r>a?-1:a>r?1:t>e?-1:e>t?1:0}),i=0;i<finalStops.length;i++)servedByRoutes+=i>0?', <a href="#route-details?routeNum='+finalStops[i].s+'">'+finalStops[i].s+"</a>":'<a href="#route-details?routeNum='+finalStops[i].s+'">'+finalStops[i].s
for(i=0;i<n.length;i++){var c=$.grep(trips,function(e){return n[i].t==e.t&&(e.s==currentServiceID||e.s==t)})
1==c.length&&r.push(n[i])}for(r.sort(function(e,t){var a=new Date("1970/01/01 "+e.b),r=new Date("1970/01/01 "+t.b)
return r>a?-1:1}),i=0;i<r.length;i++){var u,d=r[i].b.slice(0,-3)
4==d.length&&(d="0"+d)
var p=$.grep(trips,function(e){return e.t==r[i].t})
for(j=0;j<p.length;j++)u=$.grep(routes,function(e){return e.r==p[j].r})
$("#stopTable").append('<tr id="'+u[0].r+'"><td>'+d+"</td><td>"+u[0].s+" "+p[0].h+"</td></tr>")}var h=$("#stopTable tr td:nth-child(1)")
convertToStandard(h),selectedStopId=$("#selectedStopId")[0].innerHTML}function servingRoutesMap(){var e=$.grep(stop_times,function(e){return e.s==stopIdVariable})
for(finalStopsMap=[],i=0;i<e.length;i++){var t=$.grep(trips,function(t){return t.t==e[i].t})
for(j=0;j<t.length;j++){var a=$.grep(routes,function(e){return e.r==t[j].r})
finalStopsMap.push(a[0])}}var r={}
for(finalStopsMap=finalStopsMap.filter(function(e){return void 0!=e}),finalStopsMap=finalStopsMap.filter(function(e){return r[e.r]?!1:(r[e.r]=!0,!0)}),servedByRoutesMap="",finalStopsMap.sort(function(e,t){e=Number(String(e.s).replace(/\D/g,"")),t=Number(String(t.s).replace(/\D/g,""))
var a=typeof e,r=typeof t
return r>a?-1:a>r?1:t>e?-1:e>t?1:0}),i=0;i<finalStopsMap.length;i++)servedByRoutesMap+=i>0?', <a href="#route-details?routeNum='+finalStopsMap[i].s+'">'+finalStopsMap[i].s+"</a>":'<a href="#route-details?routeNum='+finalStopsMap[i].s+'">'+finalStopsMap[i].s}function filterStops(e){if("all"==e)clearStopsFilter()
else{var t=$("#stopTable tr").slice(1)
for($("#stopTable tr:hidden").show(),i=0;i<t.length;i++)t[i].id!=e&&$("tr[id="+t[i].id+"]").hide()}}function clearStopsFilter(){$("#noStops").remove(),$("#stopTable tr:hidden").show()}function onFindStopClick(){var e=$("#tbStop").val()
e.length>0&&(window.location.href=4==e.length&&e==parseInt(e)&&validateStopId(e)?"#stops?stopId="+currentStopID:"#map?search="+e)}function loadMap(){$("#appPage").load("/common/"+language+"/map.html",function(){initializeMap()}),setLeftnav("#lnavMap")}function initializeMap(){directionsDisplay=new google.maps.DirectionsRenderer,$("#searchStops").keypress(function(e){13==e.which&&codeAddressMap()}),bounds=new google.maps.LatLngBounds(new google.maps.LatLng(48.410863,-122.904638),new google.maps.LatLng(49.004438,-121.595991)),geocoder=new google.maps.Geocoder,mapStyles=[{featureType:"transit.station.bus",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#A8A8A8"}]}],mapOptions={center:{lat:48.750057,lng:-122.476085},zoom:12,styles:mapStyles,zoomControl:!0,scrollwheel:!0,draggable:!0,keyboardShortcuts:!0},finishInit(),navigator.geolocation.getCurrentPosition(function(e){var t=new google.maps.LatLng(e.coords.latitude,e.coords.longitude)
map.setCenter(t)},function(e){switch(e.code){case e.PERMISSION_DENIED:alert("Some mapping functions will not work without geolocation services enabled. For full functionality, please go to your browser's settings and enable location services.")
break
case e.POSITION_UNAVAILABLE:alert("We were unable to get your currect location. Some mapping functions may not be available.")
break
case e.TIMEOUT:alert("The request to use your location timed out. Some mapping functions may not be available.")
break
case e.UNKNOWN_ERROR:alert("We were unable to get your current location. Some mapping functions may not be available.")}})}function finishInit(){map=new google.maps.Map(document.getElementById("map-canvas"),mapOptions),directionsDisplay.setMap(map),directionsDisplay.setPanel(document.getElementById("directionsPanel")),busLayer=new google.maps.KmlLayer({url:"http://data.ridewta.com/kml/Stops.kml",preserveViewport:!0}),google.maps.event.addListener(map,"zoom_changed",function(){busLayer.setMap(map.zoom<15?null:map)}),google.maps.event.addListenerOnce(map,"idle",function(){var e=document.getElementById("map-canvas").getElementsByTagName("a")
$(e).click(function(){return!1})}),busLayer.setMap(map.zoom<15?null:map),google.maps.event.addListener(busLayer,"click",function(e){deleteMarkers(),kmlStopId=e.featureData.description.substring(9),stopIdVariable=kmlStopId,servingRoutesMap()
var t=$.grep(stops,function(e){return e.s==kmlStopId})
3==kmlStopId.length&&(kmlStopId="0"+kmlStopId),kmlStopCode=t[0].c,kmlStopName=t[0].n,e.featureData={infoWindowHtml:'<h4 style="text-decoration: underline">'+kmlStopName+'</h4><table class="table table-striped table-hover table-bordered"><tr><th>'+lang("Stop ID")+"</th><th>"+lang("Served By")+'</th><tr><td><a href="#stops?stopId='+kmlStopCode+'">'+kmlStopCode+'</a></td><td id="servedByRoutes">'+servedByRoutesMap+"</td></tr></table>"}}),setTimeout(function(){fillStopsMap()},500),scrollContentTop()}function showPosition(e){mapOptions={center:{lat:e.coords.latitude,lng:e.coords.longitude},zoom:16,styles:mapStyles}}function codeAddressMap(){var e,t=document.getElementById("searchStops").value
if(3==t.length||4==t.length){var a=$.grep(stops,function(e){return e.c==t})
if(0==a.length||a.length>1)geocoder.geocode({address:t,bounds:bounds},function(t,a){e=t[0].geometry.location,a==google.maps.GeocoderStatus.OK?e.lat()<49.004438&&e.lat()>48.410863&&e.lng()<-121.595991&&e.lng()>-122.904638?(map.setCenter(t[0].geometry.location),map.setZoom(17)):alert(lang("There were no results within our service area. Please check the stop number you entered and try again.")):alert(lang("Geocode was not successful for the following reason: ")+a)})
else{stopIdVariable=a[0].s,kmlStopName=a[0].n,kmlStopCode=a[0].c,servingRoutesMap()
var r=a[0].l,n=a[0].o,o=new google.maps.LatLng(r,n)
map.setCenter(o),map.setZoom(17)
var i=new google.maps.InfoWindow({content:'<h4 style="text-decoration: underline">'+kmlStopName+'</h4><table class="table table-striped table-hover table-bordered"><tr><th>'+lang("Stop ID")+"</th><th>"+lang("Served By")+'</th><tr><td><a href="#stops?stopId='+kmlStopCode+'">'+kmlStopCode+'</a></td><td id="servedByRoutes">'+servedByRoutesMap+"</td></tr></table>"}),s=new google.maps.Marker({position:o,map:map,visible:!1})
i.open(map,s),markers.push(s)}}else geocoder.geocode({address:t,bounds:bounds},function(t,a){a==google.maps.GeocoderStatus.OK?(e=t[0].geometry.location,e.lat()<49.004438&&e.lat()>48.410863&&e.lng()<-121.595991&&e.lng()>-122.904638?(map.setCenter(t[0].geometry.location),map.setZoom(17)):alert(lang("There were no results within our service area. Please check the address you entered and try again."))):alert(lang("Geocode was not successful for the following reason: ")+a)})}function setAllMap(e){for(var t=0;t<markers.length;t++)markers[t].setMap(e)}function clearMarkers(){setAllMap(null)}function deleteMarkers(){clearMarkers(),markers=[]}function fillStopsMap(){stopQuery&&($("#searchStops")[0].value=stopQuery,codeAddressMap())}function getLocation(){navigator.geolocation?(navigator.geolocation.getCurrentPosition(saveLocation,showError),$(".usecurrent").show()):$(".usecurrent").hide()}function saveLocation(e){currentLocation=e.coords.latitude+" "+e.coords.longitude}function useCurrentStart(){currentLocation?$("#tbStartLocation").val(currentLocation):navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){currentLocation=e.coords.latitude+" "+e.coords.longitude,$("#tbStartLocation").val(currentLocation)})}function useCurrentEnd(){currentLocation?$("#tbEndLocation").val(currentLocation):navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){currentLocation=e.coords.latitude+" "+e.coords.longitude,$("#tbEndLocation").val(currentLocation)})}function showError(e){switch(e.code){case e.PERMISSION_DENIED:break
case e.POSITION_UNAVAILABLE:break
case e.TIMEOUT:break
case e.UNKNOWN_ERROR:}}function getRoutes(){var e=routes
return e.sort(function(e,t){e=Number(String(e.s).replace(/\D/g,"")),t=Number(String(t.s).replace(/\D/g,""))
var a=typeof e,r=typeof t
return r>a?-1:a>r?1:t>e?-1:e>t?1:0}),e}function getRoute(e){routeList||(routeList=getRoutes())
var t=$.grep(routeList,function(t){return t.r==e})
return t?t[0]:null}function getStop(e){var t=null
if(e){var t=Enumerable.From(stops).Where("$.c == "+e).ToArray()
t&&(t=t[0])}return t}function validateStopId(e){var t=!1
if(e){var a=getStop(e)
a?(currentStopID=a.c,stopIdVariable=a.s,stopNameVariable=a.n,t=!0):(currentStopID=null,stopIdVariable=null,stopNameVariable=null,t=!1)}return t}function validateDirId(e){currentDirectionID=0==e?0:1==e?1:0}function validateRouteId(e){var t=getRoute(e)
return t?(currentRouteID=t.r,!0):(currentRouteID=null,currentRouteNumber=null,!1)}function BindTopNav(){var e=$("#topnavbar ul.root")
e.length>0&&e.find("li.dynamic-children").each(function(){var e=$(this).children(".menu-item"),t=e.children("span").eq(0),a=t.children("span.menu-item-text").eq(0)
$(this).hover(function(){HoverTopNav($,$(this),"")},function(){HoverTopNav($,$(this),"o")}),e.is("span")?(e.bind("click",function(){return DropTopNav($,$(this)),!1}),t.bind("click",function(){return DropTopNav($,$(this).parent()),!1})):(e.bind("click",function(e){return e.pageX>=a.offset().left&&e.pageX<=a.offset().left+a.outerWidth(!0)&&e.pageY>=a.offset().top&&e.pageY<=a.offset().top+a.outerHeight(!0)?!0:(DropTopNav($,$(this).eq(0)),!1)}),t.bind("click",function(e){return e.pageX>=a.offset().left&&e.pageX<=a.offset().left+a.outerWidth(!0)&&e.pageY>=a.offset().top&&e.pageY<=a.offset().top+a.outerHeight(!0)?window.location.href=$(this).parent("a").eq(0).attr("href"):DropTopNav($,$(this).parent("a").eq(0)),!1}))})}function HoverTopNav(e,t,a){if(t.length>0){var r=e(".navbar-toggle")
r.length>0&&"none"==r.css("display")&&DropTopNav(e,t.children(".menu-item").eq(0),a)}}function DropTopNav(e,t,a){if(t.length>0){var r=t.siblings("ul").eq(0),n=t.parent()
if(r.length>0&&(n.hasClass("shown")||"o"==a?(n.removeClass("shown"),r.attr("style","")):n.addClass("shown"),e(window).width()>840)){var o=r.offset().left+r.width()
o>e(window).width()-20&&r.attr("style","left: -"+(o-(e(window).width()-20))+"px !important;  position:absolute !important;")}}}function lang(e){var t=["Route","Out of Service","Continues On As","There is no bus service on this holiday.","We’re sorry. Bus schedules for the date you selected are not available yet. Please check back closer to your intended date of travel.","There is no service during the specified route and time.","Starting Bus Stop","No available view of this bus stop.","Geocode was not successful for the following reason: ","Time","Stop ID","Served By","There were no results within our service area. Please check the stop number you entered and try again.","to"],a=["Ruta","Fuera de servicio","Continuar como","No hay servicio de autobús en estas vacaciones.","Lo sentimos. Los horarios de autobuses para la fecha que ha seleccionado aún no están disponibles . Por favor, vuelva más cerca de su fecha prevista del viaje.","No hay servicio de la ruta y la hora especificadas.","A partir de la parada de autobús","No hay vistas disponibles de esta parada de autobús.","Geocode falló por la siguiente razón: ","Hora","ID de parada","Servido por","No hubo resultados dentro de nuestra área de servicio . Por favor, compruebe el número de parada que ha introducido y vuelva a intentarlo.",""]
return"es"==language?a[t.indexOf(e)]:e}var currentRouteID,currentRouteNumber,currentStopID,routeList,map,trip_headsign,servedByRoutes,servedByRoutesMap,finalStops,finalStopsMap,specialServiceDate,map,busLayer,mapOptions,currentLocation,mapStyles,geocoder,kmlStopCode,kmlStopName,kmlStopId,chosenRoute,chosenRouteId,stopIdVariable,bounds,panorama,stopNameVariable,stopVariable,stopQuery,pagerTimeout,$tableHeader,$tableHeaderClone,tableHeaderTop,$tableContainer,$table,currentDirectionID=0,currentServiceID=1,currentDate=new Date,entryPanoId=null,scrollToTop=!1,gzipEnabled=!0
if("es"==language)var searchURL="http://www.ridewta.com/search/pages/results.aspx?k="
else var searchURL="http://www.ridewta.com/search/pages/results.aspx?k="
var markers=[],serviceChangeDate,serviceLastDate,currentDayNum
$(document).ready(function(){$(window).on("hashchange",function(){loadPageContent(),$("html, body").animate({scrollTop:0},"medium")
var e="/"+window.location.hash
ga("set","page",e),ga("send","pageview",e)}),loadMain()}),function(e){e.fn.changeElementType=function(t){var a={}
e.each(this[0].attributes,function(e,t){a[t.nodeName]=t.nodeValue}),this.replaceWith(function(){return e("<"+t+"/>",a).append(e(this).contents())})}}(jQuery)
var sync=function(){$tableHeaderClone.scrollLeft(this.scrollLeft)}
